<p></p>
<p></p>
<h1 id="Oracle-Konfiguration">Oracle-Konfiguration</h1>
<p>Diese Seite dient der Sammlung von Anforderungen an die Oracle-Installation bei Kunden. Spezifische Parameter sollen in eigenen Tabellen am Ende angefügt werden. Die Standardkonfiguration bezieht sich auf TL 5.7.2- und TL 5.7.3-basierte Systeme.</p>
<table border="1" cellpadding="1" cellspacing="1">
 <tbody>
  <tr>
   <th>Kategorie</th>
   <th>Merkmal</th>
   <th>Default</th>
   <th>Vorgabe der Applikation</th>
   <th>Anmerkung</th>
  </tr>
  <tr>
   <td>Grundlegendes</td>
   <td>DB_Version</td>
   <td>11.2.0.3 (11gR2)</td>
   <td></td>
   <td></td>
  </tr>
  <tr>
   <td></td>
   <td>db_block_size</td>
   <td>8192</td>
   <td></td>
   <td>wichtiger Parameter für die Performance</td>
  </tr>
  <tr>
   <td></td>
   <td>Zeichensatz</td>
   <td>AL32UTF8</td>
   <td></td>
   <td>Achtung: Statischer Parameter, kann nur durch einen Neuaufbau der DB geändert werden</td>
  </tr>
  <tr>
   <td></td>
   <td>Archivelog-Modus</td>
   <td>archivelog</td>
   <td></td>
   <td>Bei noarchivelog kann die DB nicht online gesichert werden</td>
  </tr>
  <tr>
   <td>Zu installierende Optionen</td>
   <td>ADVANCED SECURITY</td>
   <td>siehe Bemerkung</td>
   <td></td>
   <td>PRÜFEN (VERSCHLÜSSELUNG?)</td>
  </tr>
  <tr>
   <td>init.ora-Parameter</td>
   <td></td>
   <td></td>
   <td></td>
   <td>Sehr viele init.ora-Parameter sind statisch, d. h. die DB muss für eine Änderung durchgestartet werden</td>
  </tr>
  <tr>
   <td></td>
   <td>db_name</td>
   <td></td>
   <td>PROJEKTSPEZIFISCH</td>
   <td>Applikationsspezifisch</td>
  </tr>
  <tr>
   <td></td>
   <td>db_block_size</td>
   <td>8192</td>
   <td></td>
   <td></td>
  </tr>
  <tr>
   <td></td>
   <td>memory_target</td>
   <td>900M</td>
   <td></td>
   <td>SGA: 2GB bei BMW</td>
  </tr>
  <tr>
   <td></td>
   <td>processes</td>
   <td>150</td>
   <td></td>
   <td></td>
  </tr>
  <tr>
   <td></td>
   <td>aq_tm_processes</td>
   <td>DB-Default</td>
   <td></td>
   <td></td>
  </tr>
  <tr>
   <td></td>
   <td>job_queue_processes</td>
   <td>DB-Default</td>
   <td></td>
   <td>PRÜFEN: wird da etwas benötigt?</td>
  </tr>
  <tr>
   <td></td>
   <td>db_files</td>
   <td>DB-Default</td>
   <td></td>
   <td></td>
  </tr>
  <tr>
   <td></td>
   <td>open_cursors</td>
   <td>300</td>
   <td></td>
   <td></td>
  </tr>
  <tr>
   <td></td>
   <td>undo_management</td>
   <td>auto</td>
   <td></td>
   <td></td>
  </tr>
  <tr>
   <td></td>
   <td>undo_retention</td>
   <td>900</td>
   <td></td>
   <td></td>
  </tr>
  <tr>
   <td></td>
   <td>max_dump_file_size</td>
   <td>10M</td>
   <td></td>
   <td></td>
  </tr>
  <tr>
   <td></td>
   <td>remote_login_passwordfile</td>
   <td>EXCLUSIVE</td>
   <td></td>
   <td></td>
  </tr>
  <tr>
   <td></td>
   <td>filesystemio_options</td>
   <td>SetAll</td>
   <td></td>
   <td></td>
  </tr>
  <tr>
   <td></td>
   <td>shared_pool_size</td>
   <td>0</td>
   <td></td>
   <td>PRÜFEN: was ist ASMM, wie sieht es in anderen Umgebungen aus (BMW, VW)?</td>
  </tr>
  <tr>
   <td></td>
   <td>large_pool_size</td>
   <td>0</td>
   <td></td>
   <td></td>
  </tr>
  <tr>
   <td></td>
   <td>java_pool_size</td>
   <td>0</td>
   <td></td>
   <td></td>
  </tr>
  <tr>
   <td></td>
   <td>db_cache_size</td>
   <td>0</td>
   <td></td>
   <td></td>
  </tr>
  <tr>
   <td></td>
   <td>nls_language</td>
   <td>AMERICAN</td>
   <td></td>
   <td></td>
  </tr>
  <tr>
   <td></td>
   <td>nls_territory</td>
   <td>AMERICA</td>
   <td></td>
   <td></td>
  </tr>
  <tr>
   <td></td>
   <td>nls_date_format</td>
   <td>DD-MON-YYYY</td>
   <td>DD-MON-RR</td>
   <td>Date format. Default abhängig vom Server. PRÜFEN, ob in Installationen unterschiedlich. Aktuell nicht verwendet!?</td>
  </tr>
  <tr>
   <td></td>
   <td>nls_time_format</td>
   <td></td>
   <td>HH.MI.SSXFF AM</td>
   <td>Time format. PRÜFEN</td>
  </tr>
  <tr>
   <td></td>
   <td>nls_timestamp_format</td>
   <td></td>
   <td>DD-MON-RR HH.MI.SSXFF AM</td>
   <td>Time stamp format. PRÜFEN</td>
  </tr>
  <tr>
   <td></td>
   <td>nls_time_tz_format</td>
   <td></td>
   <td>HH.MI.SSXFF AM TZR</td>
   <td>Time with timezone format. PRÜFEN</td>
  </tr>
  <tr>
   <td></td>
   <td>nls_timestamp_tz_format</td>
   <td></td>
   <td>DD-MON-RR HH.MI.SSXFF AM TZR</td>
   <td>Timestamp with timezone format. PRÜFEN</td>
  </tr>
  <tr>
   <td></td>
   <td>NLS_NCHAR_CHARACTERSET</td>
   <td>AL16UTF16</td>
   <td>UTF8</td>
   <td></td>
  </tr>
  <tr>
   <td>Redolog</td>
   <td>Anzahl Redolog-Gruppen</td>
   <td>5</td>
   <td></td>
   <td>PRÜFEN</td>
  </tr>
  <tr>
   <td></td>
   <td>Anzahl Redolog-Member</td>
   <td>2</td>
   <td></td>
   <td>PRÜFEN</td>
  </tr>
  <tr>
   <td></td>
   <td>Größe einer Redolog-Datei</td>
   <td>50M</td>
   <td></td>
   <td>PRÜFEN (evtl. Einfluss auf max. Commit-Größe)</td>
  </tr>
  <tr>
   <td></td>
   <td>Menge Redolog pro Tag</td>
   <td>2500M</td>
   <td></td>
   <td>PRÜFEN</td>
  </tr>
  <tr>
   <td>Tablespaces</td>
   <td>SYSAUX</td>
   <td>500M</td>
   <td></td>
   <td></td>
  </tr>
  <tr>
   <td></td>
   <td>SYSTEM</td>
   <td>500M</td>
   <td></td>
   <td></td>
  </tr>
  <tr>
   <td></td>
   <td>TEMP</td>
   <td>500M</td>
   <td></td>
   <td>PRÜFEN</td>
  </tr>
  <tr>
   <td></td>
   <td>UNDOTBS01</td>
   <td>300M</td>
   <td></td>
   <td>PRÜFEN. Ebenfalls prüfen: Tablespace für Indizes benötigt?</td>
  </tr>
  <tr>
   <td></td>
   <td>USERS</td>
   <td>5M</td>
   <td></td>
   <td></td>
  </tr>
  <tr>
   <td></td>
   <td>PROJEKTSPEZIFISCHER TS</td>
   <td></td>
   <td>500M extent management auto</td>
   <td>Projektspezifisch</td>
  </tr>
  <tr>
   <td>Benutzer</td>
   <td>PROJEKTSPEZIFISCH</td>
   <td>keine Quotas</td>
   <td></td>
  </tr>
  <tr>
   <td>Rollen</td>
   <td></td>
   <td></td>
   <td>CONNECT</td>
   <td>PRÜFEN: Exportparameter so einstellen, dass Berechtigungen nicht mit exportiert werden. MUSS-Rechte: SELECT, UPDATE, INSERT, DELETE. NTH-Rechte: CREATE/DROP INDEX, CREATE/ALTER TABLE. Welche Rollen bilden diese Rechte ab?</td>
  </tr>
 </tbody>
</table>
<h2 id="Encoding">Encoding</h2>
<p>Oracle hat mehrere Encodings, unterschiedlich nach Datentyp.</p>
<p>Das Standardencoding ist <code class="hljs inlineCode">NLS_CHARACTERSET</code> und sollte <code class="hljs inlineCode">AL16UTF16</code> oder <code class="hljs inlineCode">AL32UTF8</code> sein.</p>
<p>Für lange String-Typen (<code class="hljs inlineCode">CLOB</code>) wird das Encoding <code class="hljs inlineCode">NLS_NCHAR_CHARACTERSET</code> benutzt.</p>
<p>Ohne den Fix in <s><a href="http://tl/trac/ticket/20122" title="#20122: defect: Lange Texte mit Umlauten lassen Commit auf Oracle ohne sinnvolle ... (closed: fixed)" target="_blank">#20122</a></s> gibt es beim Zeichensatz <code class="hljs inlineCode">AL32UTF8</code> Probleme beim Speichern von langen Texten, wenn diese Umlaute enthalten. Mit <code class="hljs inlineCode">AL16UTF16</code> verhält sich das System dann konsistent, allerdings werden unnötig viele <code class="hljs inlineCode">CLOB</code>-Spalten angelegt.</p>
<h2 id="Pro2SPorsche">Pro2S (Porsche)</h2>
<table border="1" cellpadding="1" cellspacing="1">
 <tbody>
  <tr>
   <th>Kategorie</th>
   <th>Merkmal</th>
   <th>Default</th>
   <th>Vorgabe der Applikation</th>
   <th>Anmerkung</th>
  </tr>
  <tr>
   <td>init.ora-Parameter</td>
   <td></td>
   <td></td>
   <td></td>
   <td></td>
  </tr>
  <tr>
   <td></td>
   <td>db_name</td>
   <td></td>
   <td>pro2sp</td>
   <td></td>
  </tr>
  <tr>
   <td>Tablespaces</td>
   <td></td>
   <td></td>
   <td></td>
   <td></td>
  </tr>
  <tr>
   <td></td>
   <td>PRO2S_TS</td>
   <td></td>
   <td>500M extent management auto</td>
   <td></td>
  </tr>
  <tr>
   <td>Benutzer</td>
   <td>PRO2S</td>
   <td>keine Quotas</td>
   <td></td>
  </tr>
  <tr>
   <td>Rollen</td>
   <td></td>
   <td></td>
   <td>CONNECT</td>
   <td></td>
  </tr>
 </tbody>
</table>
<h2 id="TestDatenbanken">Test Datenbanken</h2>
<p>Ein CWS_Build auf einer spezifischen Datenbank kann diese überfordern, da alle Tests, auch die JunitTests, auf dieser ausgeführt werden. Im TL_Build werden nur Datenbanktests auf externen Datenbanken ausgeführt und die JunitTests auf der lokalen H2.</p>
<p>Für Oracle muss bei einer Testdatenbank die Anzahl der offenen Curser pro Verbindung deutlich erhöht werden. Default ist hier 300. Unter Umständen kann dies auch auf produktiven Systemen nötig sein, bisher (06.11.2020) ist aber kein Fall bekannt, bei dem hier ein Problem aufgetaucht ist.</p>
<p>Setup: <code class="hljs inlineCode">alter system set open_cursors = 3000 scope=both</code></p>
<p>Prüfung: <code class="hljs inlineCode">SHOW PARAMETERS;</code></p>
<h2 id="BekannteProbleme">Bekannte Probleme</h2>
<p></p>
<ul>
 <li><s><a href="http://tl/trac/ticket/466" title="Workaround für Oracle NULL-Key in DBDimensionalStorage" target="_blank">#466</a></s> defect: Workaround für Oracle NULL-Key in DBDimensionalStorage (closed: fixed)</li>
 <li><s><a href="http://tl/trac/ticket/505" title="Oracle Deployment klären" target="_blank">#505</a></s> task: Oracle Deployment klären (closed: fixed)</li>
 <li><s><a href="http://tl/trac/ticket/813" title="Neuinstallation defr-as03-002 (SBS, Oracle9)" target="_blank">#813</a></s> task: Neuinstallation defr-as03-002 (SBS, Oracle9) (closed: fixed)</li>
 <li><s><a href="http://tl/trac/ticket/882" title="FlexDataManager kann bei ORACLE &quot;&quot; und null nicht unterscheiden" target="_blank">#882</a></s> defect: FlexDataManager kann bei ORACLE "" und null nicht unterscheiden (closed: fixed)</li>
 <li><s><a href="http://tl/trac/ticket/1056" title="FlexDataManager kann bei ORACLE Umlaute nicht in 254 Byte speichern" target="_blank">#1056</a></s> defect: FlexDataManager kann bei ORACLE Umlaute nicht in 254 Byte speichern (closed: duplicate)</li>
 <li><s><a href="http://tl/trac/ticket/1316" title="FLEX_DATA für Oracle mit &quot;ORGANIZATION INDEX COMPRESS 4&quot;" target="_blank">#1316</a></s> enhancement: FLEX_DATA für Oracle mit "ORGANIZATION INDEX COMPRESS 4" (closed: fixed)</li>
 <li><s><a href="http://tl/trac/ticket/1563" title="Testcases benötigen zu viele ORACLE-Connections" target="_blank">#1563</a></s> defect: Testcases benötigen zu viele ORACLE-Connections (closed: wontfix)</li>
 <li><s><a href="http://tl/trac/ticket/1740" title="TopLogic für Oracle 11.2 vorbereiten" target="_blank">#1740</a></s> task: TopLogic für Oracle 11.2 vorbereiten (closed: fixed)</li>
 <li><s><a href="http://tl/trac/ticket/1854" title="Support of Unicode characters in the persistency layer" target="_blank">#1854</a></s> defect: Support of Unicode characters in the persistency layer (closed: fixed)</li>
 <li><s><a href="http://tl/trac/ticket/2876" title="Kein Autorollback nach fehlgeschlagenen executeBatch() mit Oracle Treiber" target="_blank">#2876</a></s> defect: Kein Autorollback nach fehlgeschlagenen executeBatch() mit Oracle Treiber (closed: wontfix)</li>
 <li><s><a href="http://tl/trac/ticket/2898" title="RowLevelLockingSequenceManager soll bei Oracle SEQUENCEs verwenden" target="_blank">#2898</a></s> enhancement: RowLevelLockingSequenceManager soll bei Oracle SEQUENCEs verwenden (closed: wontfix)</li>
 <li><s><a href="http://tl/trac/ticket/2904" title="DPMIndicatorStorage benötigt Indexe." target="_blank">#2904</a></s> enhancement: DPMIndicatorStorage benötigt Indexe. (closed: fixed)</li>
 <li><s><a href="http://tl/trac/ticket/2918" title="Extraction der Historie liefert falsche Ergebnisse mit Oracle" target="_blank">#2918</a></s> defect: Extraction der Historie liefert falsche Ergebnisse mit Oracle (closed: fixed)</li>
 <li><s><a href="http://tl/trac/ticket/3162" title="Oracle10Helper - Natural language character set is not 'AL32UTF8 ' but ..." target="_blank">#3162</a></s> defect: Oracle10Helper - Natural language character set is not 'AL32UTF8 ' but … (closed: wontfix)</li>
 <li><s><a href="http://tl/trac/ticket/3943" title="Prepared Statement für ORACLE führen immer zu &quot;hard parse&quot;" target="_blank">#3943</a></s> defect: Prepared Statement für ORACLE führen immer zu "hard parse" (closed: fixed)</li>
 <li><s><a href="http://tl/trac/ticket/3984" title="SecurityStorage.isDirty() sucht (bei Oracle) nach allen Werten." target="_blank">#3984</a></s> defect: SecurityStorage.isDirty() sucht (bei Oracle) nach allen Werten. (closed: fixed)</li>
 <li><s><a href="http://tl/trac/ticket/4343" title="SecurityStorage batch Update führt mit #3943 zu AIOOBE" target="_blank">#4343</a></s> defect: SecurityStorage batch Update führt mit <s><a href="http://tl/trac/ticket/3943" title="#3943: defect: Prepared Statement für ORACLE führen immer zu &quot;hard parse&quot; (closed: fixed)" target="_blank">#3943</a></s> zu AIOOBE (closed: fixed)</li>
 <li><s><a href="http://tl/trac/ticket/4699" title="Umstellungen für Oracle11 in der Basis" target="_blank">#4699</a></s> task: Umstellungen für Oracle11 in der Basis (closed: fixed)</li>
 <li><s><a href="http://tl/trac/ticket/5364" title="Migration für DPM 1.4" target="_blank">#5364</a></s> task: Migration für DPM 1.4 (closed: fixed)</li>
 <li><s><a href="http://tl/trac/ticket/5635" title="DirectDBAccess quoted Spaltennamen nicht korrekt." target="_blank">#5635</a></s> defect: DirectDBAccess quoted Spaltennamen nicht korrekt. (closed: fixed)</li>
 <li><s><a href="http://tl/trac/ticket/5921" title="Eventreihenfolge bei KB-Migration bei Oracle fehlerhaft" target="_blank">#5921</a></s> defect: Eventreihenfolge bei KB-Migration bei Oracle fehlerhaft (closed: fixed)</li>
 <li><s><a href="http://tl/trac/ticket/6272" title="Alle Tabellen mit ORGANISATION INDEX nach Migration überprüfen" target="_blank">#6272</a></s> task: Alle Tabellen mit ORGANISATION INDEX nach Migration überprüfen (closed: fixed)</li>
 <li><s><a href="http://tl/trac/ticket/6759" title="Sizing für Datenbank" target="_blank">#6759</a></s> task: Sizing für Datenbank (closed: invalid)</li>
 <li><s><a href="http://tl/trac/ticket/6768" title="DBHelper.internalCheck() loggt ERROR obwohl Datenquelle prinzipiell ..." target="_blank">#6768</a></s> defect: DBHelper.internalCheck() loggt ERROR obwohl Datenquelle prinzipiell … (closed: fixed)</li>
 <li><s><a href="http://tl/trac/ticket/6772" title="KPCategory.kpNr darf nicht mandatory deklariert sein" target="_blank">#6772</a></s> defect: KPCategory.kpNr darf nicht mandatory deklariert sein (closed: fixed)</li>
 <li><s><a href="http://tl/trac/ticket/7417" title="Backup von oracle@defr-dblx-012" target="_blank">#7417</a></s> task: Backup von oracle@defr-dblx-012 (closed: fixed)</li>
 <li><s><a href="http://tl/trac/ticket/8175" title="Fehlende Unterstützung von &quot;National Character Set&quot; Typen in JDBC ab ..." target="_blank">#8175</a></s> defect: Fehlende Unterstützung von "National Character Set" Typen in JDBC ab … (closed: fixed)</li>
 <li><a href="http://tl/trac/ticket/8699" title="Empty String in mandatory Attributen" target="_blank">#8699</a> task: Empty String in mandatory Attributen (new)</li>
 <li><s><a href="http://tl/trac/ticket/8738" title="Großes Flex-Attribute-Preload scheitert auf Oracle" target="_blank">#8738</a></s> defect: Großes Flex-Attribute-Preload scheitert auf Oracle (closed: fixed)</li>
 <li><s><a href="http://tl/trac/ticket/11237" title="Excel Export von Bericht: ORA-00904: &quot;ACT_STORE&quot;.&quot;flag&quot;: invalid identifier" target="_blank">#11237</a></s> defect: Excel Export von Bericht: ORA-00904: "ACT_STORE"."flag": invalid identifier (closed: fixed)</li>
 <li><s><a href="http://tl/trac/ticket/11980" title="Neue Adresse für Oracle Datenbank" target="_blank">#11980</a></s> task: Neue Adresse für Oracle Datenbank (closed: fixed)</li>
 <li><s><a href="http://tl/trac/ticket/12261" title="Oracle Probleme mit TestWebFolder" target="_blank">#12261</a></s> defect: Oracle Probleme mit TestWebFolder (closed: fixed)</li>
 <li><a href="http://tl/trac/ticket/13221" title="ORACLE: Index organisierte Tabellen mit Lob-Spalten können nicht ..." target="_blank">#13221</a> defect: ORACLE: Index organisierte Tabellen mit Lob-Spalten können nicht … (new)</li>
 <li><s><a href="http://tl/trac/ticket/17688" title="Knowledge-Base-Diff darf keine CLOB-Werte in der Datenbank vergleichen" target="_blank">#17688</a></s> defect: Knowledge-Base-Diff darf keine CLOB-Werte in der Datenbank vergleichen (closed: fixed)</li>
 <li><s><a href="http://tl/trac/ticket/17874" title="Oracle erlaubt Commits für Read-Only-Connections" target="_blank">#17874</a></s> defect: Oracle erlaubt Commits für Read-Only-Connections (closed: fixed)</li>
 <li><a href="http://tl/trac/ticket/18743" title="Fehlerhafte Suche bei Groß-Klein-Schreibung" target="_blank">#18743</a> defect: Fehlerhafte Suche bei Groß-Klein-Schreibung (new)</li>
 <li><s><a href="http://tl/trac/ticket/20122" title="Lange Texte mit Umlauten lassen Commit auf Oracle ohne sinnvolle ..." target="_blank">#20122</a></s> defect: Lange Texte mit Umlauten lassen Commit auf Oracle ohne sinnvolle … (closed: fixed)</li>
 <li><s><a href="http://tl/trac/ticket/21726" title="Setzen von leeren Strings als CLOB in Oracle führt zu Fehler" target="_blank">#21726</a></s> defect: Setzen von leeren Strings als CLOB in Oracle führt zu Fehler (closed: fixed)</li>
 <li><s><a href="http://tl/trac/ticket/23514" title="SSL-Verschlüsselung für DB-Verbindungen" target="_blank">#23514</a></s> enhancement: SSL-Verschlüsselung für DB-Verbindungen (closed: fixed)</li>
 <li><s><a href="http://tl/trac/ticket/23567" title="Oracle: Literale Werte für CLOB Spalten zu groß" target="_blank">#23567</a></s> defect: Oracle: Literale Werte für CLOB Spalten zu groß (closed: fixed)</li>
 <li><s><a href="http://tl/trac/ticket/23739" title="Docker: Neue Java parameter" target="_blank">#23739</a></s> enhancement: Docker: Neue Java parameter (closed: fixed)</li>
 <li><s><a href="http://tl/trac/ticket/24904" title="Compatibilitätstest mit unterschiedlichen Datenbankversionen z.B. ..." target="_blank">#24904</a></s> enhancement: Compatibilitätstest mit unterschiedlichen Datenbankversionen z.B. … (closed: fixed)</li>
 <li><a href="http://tl/trac/ticket/25418" title="CaseSensitive Tabellenwerte (Char,String,Text) in Datenbanken." target="_blank">#25418</a> defect: CaseSensitive Tabellenwerte (Char,String,Text) in Datenbanken. (assigned)</li>
</ul>
<p></p>