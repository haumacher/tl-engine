<?xml version="1.0" encoding="utf-8" ?>

<config:template-call
	xmlns:config="http://www.top-logic.com/ns/config/6.0"
	final="true"
	template="com.top_logic.element/form.template.xml"
>
	<arguments
		confirm="true"
		model="selection(com.top_logic.demo/technical/components/commandExecutability/operationsTable.layout.xml#Table)"
	>
		<name key="dynamic.6c5fd73a-dac3-4a0d-9f96-19a9539707a6">
			<en>Details</en>
			<de>Details</de>
		</name>
		<additional-operation><![CDATA[model -> if ($model.get(`test.commandApproval:StatefulElement#stop`), {
    $model.set(`test.commandApproval:StatefulElement#state`, `test.commandApproval:OperationState#CANCLED`)
})]]></additional-operation>
		<dynamic-confirm><![CDATA[model -> form -> if ($form.get(`test.commandApproval:StatefulElement#stop`), 
    #("Möchten Sie {0} wirklich abbrechen?"@de, "Do you really want to cancel {0}?"@en).fill($model))]]></dynamic-confirm>
		<forms>
			<form type="test.commandApproval:StatefulElement">
				<formDefinition>
					<field
						attribute="name"
						fullQualifiedName="test.commandApproval:StatefulElement#name"
						type="tl.core:String"
					>
						<annotations>
							<render-whole-line/>
						</annotations>
					</field>
					<field
						attribute="stop"
						fullQualifiedName="test.commandApproval:StatefulElement#stop"
						type="tl.core:Boolean"
					/>
					<field
						attribute="reason"
						fullQualifiedName="test.commandApproval:StatefulElement#reason"
						type="tl.core:Text"
					/>
				</formDefinition>
			</form>
		</forms>
		<confirmMessage key="dynamic.21616a7b-3dd6-4874-8bd3-96a95b989bd9">
			<en>Do you really want to save the changes?</en>
			<de>Wollen Sie die Änderungen wirklich speichern?</de>
		</confirmMessage>
	</arguments>
</config:template-call>